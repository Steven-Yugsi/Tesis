<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:local="clr-namespace:Tesis.ViewModels"
             x:Class="Tesis.Views.UserListPage"
             Title="Usuarios"
             BackgroundColor="#ADD8E6"
             x:Name="UserListPage1">

    <!-- BindingContext asignado desde el ViewModel -->
    <ContentPage.BindingContext>
        <local:UserListViewModel />
    </ContentPage.BindingContext>

    <ContentPage.Content>
        <ScrollView Padding="20">
            <StackLayout Spacing="20">
                <Label Text="Administrar Usuarios"
                       FontSize="28"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="#000000" />

                <Image Source="usuarios.png"
                       HeightRequest="120"
                       HorizontalOptions="Center" />

                <Label Text="Revisa y edita la información de los usuarios"
                       FontSize="16"
                       HorizontalOptions="Center"
                       TextColor="#363636" />

                <!-- CollectionView para listar usuarios -->
                <CollectionView ItemsSource="{Binding Usuarios}"
                                BackgroundColor="Transparent"
                                SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="#FFFFFF"
                                   BorderColor="#D3D3D3"
                                   CornerRadius="20"
                                   Padding="15"
                                   Margin="0,10"
                                   HasShadow="True">
                                <StackLayout Spacing="10">
                                    <Label Text="{Binding NombreCompleto}"
                                           FontSize="20"
                                           FontAttributes="Bold"
                                           TextColor="#000000" />

                                    <StackLayout Orientation="Vertical" Spacing="5">
                                        <Label Text="{Binding Correo}"
                                               FontSize="14"
                                               TextColor="#757575" />
                                        <!-- Label para mostrar el tipo de perfil -->
                                        <Label Text="{Binding TipoPerfil}"
                                               FontSize="14"
                                               TextColor="#757575" />
                                    </StackLayout>

                                    <StackLayout Orientation="Horizontal" Spacing="10">
                                        <Label Text="Tipo de Perfil:"
                                               FontSize="14"
                                               TextColor="#000000" />

                                        <!-- Picker para seleccionar el tipo de perfil -->
                                        <Picker x:Name="TipoPerfilPicker"
                                                Title="Seleccionar Perfil"
                                                ItemsSource="{Binding Source={x:Reference UserListPage1}, Path=BindingContext.TiposDePerfil}"
                                                SelectedItem="{Binding TipoPerfil, Mode=TwoWay}"
                                                SelectedIndexChanged="OnTipoPerfilChanged"
                                                TextColor="#363636"
                                                FontSize="14"
                                                HeightRequest="50"
                                                />

                                    </StackLayout>
                                </StackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <BoxView HeightRequest="20" Color="#ADD8E6" />
            </StackLayout>
        </ScrollView>
    </ContentPage.Content>
</ContentPage>
